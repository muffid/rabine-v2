import { useRouter } from 'next/router'
import React from 'react'
import Head from 'next/head'
import NavbarSecond from '../../components/globals/NavbarSecond'
import Footer from '../../components/globals/Footer'
import DetailPreset from '../../components/product_detail/DetailPreset'
import { GET_PRODUCTS,GET_PRODUCTS_BY_ID } from '../../lib/product-queries'
import { graphQLClient } from '../../lib/graphql-client'

function ProdId({products}) {

    const router = useRouter()
    const {presetId} = router.query
    const detailData = products[0]
    console.log(detailData);

  return (

    <div className='w-full base '>
      <Head>
        <title>Rabine.id - Lihat Preset Desain</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/rbn.ico" />
      </Head>
      <NavbarSecond />
      <main className='w-full mx-auto px-6 md:px-12 max-w-[1200px]'>
        <DetailPreset idPreset={detailData.id} 
        namePreset={detailData.productName} 
        catPreset={detailData.category} 
        imgPreset={detailData.image.url} 
        // priceP={detailData.price}
        priceP={100000}
        slug={detailData.slug} />
     </main>
     <Footer/>
    </div>
  )
}

export async function getServerSideProps(context) {

  const { id } = context.params;
  const data = await graphQLClient.request(GET_PRODUCTS_BY_ID(id));

  return {
    props: {
      products: data.presets,
    },
  };
}





export default ProdId